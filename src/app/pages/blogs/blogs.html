<div class="flex flex-col gap-3">
    <div class="flex justify-between items-center">
        <div>
            <h1 class="text-3xl font-semibold">Blogs</h1>
            <p>View and manage all Blogs</p>
        </div>
        <p-button label="Add Blog" icon="pi pi-plus" size="small" routerLink="/blogs/new" />
    </div>
    <p-table #dt [size]="'large'" [stripedRows]="true" [paginator]="true" [rows]="10"
        [rowsPerPageOptions]="[10, 25, 50]" [lazy]="true" (onLazyLoad)="loadBlogs($event)"
        [totalRecords]="this.isSearchActive() ? this.blogService.blogs().data?.totalDocsForFilter || 0 : this.blogService.blogs().data?.totalDocs || 0"
        [value]="this.blogService.blogs().data?.data || []" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
            <tr>
                <th>S.No.</th>
                <th>Title</th>
                <th>Content</th>
                <th>Author</th>
                <th>Actions</th>
            </tr>
        </ng-template>
        @if (this.blogService.blogs().isLoading) {
        <ng-template #body let-rowData>
            <tr>
                <td><p-skeleton height="1.5rem" /></td>
                <td><p-skeleton height="1.5rem" /></td>
                <td><p-skeleton height="1.5rem" /></td>
                <td><p-skeleton height="1.5rem" /></td>
                <td><p-skeleton height="1.5rem" /></td>
            </tr>
        </ng-template>
        }
        @else {
        <ng-template #body let-blog>
            <tr>
                <td>{{ blog.index }}</td>
                <td>
                    <a [href]="'/blogs/' + blog._id" class="text-blue-500 hover:underline">
                        {{ blog.title }}
                    </a>
                </td>
                <td>
                    <div [innerHTML]="blog.content?.substring(0, 75) + '...'"></div>
                </td>
                <td>{{ blog.createdBy?.name }}</td>
                <td>
                    <div class="flex gap-2">
                        <p-button size="small" outlined="true" label="Edit" icon="pi pi-pencil"
                            [routerLink]="'/blogs/' + blog._id + '/edit'" />
                        <p-button size="small" outlined="true" [severity]="'danger'" label="Delete"
                            icon="pi pi-trash" />
                    </div>
                </td>
            </tr>
        </ng-template>
        }
    </p-table>
</div>